# 仓鼠家 HamHome 产品文档

## 1. 产品概述 (Product Overview)
### 1.1 产品愿景
**“让收藏不再积灰，打造你的第二大脑。”**
HamHome 旨在解决用户在互联网冲浪中“只藏不看”、“难以检索”、“分类繁琐”的痛点，通过 AI 技术实现书签的自动化管理与知识沉淀。

### 1.2 核心痛点
- **只藏不看**：收藏夹变成了“稍后阅读”的坟墓。
- **检索困难**：想找一篇以前看过的文章，只记得大概内容，但不记得标题或关键词。
- **分类繁琐**：每次收藏都要手动选择文件夹，维护成本高。
- **链接失效**：原网页被删除或服务器关闭，导致收藏内容丢失。

## 2. 目标用户 (Target Audience)
- **知识工作者**：需要大量阅读和整理资料的研究员、产品经理、设计师等。
- **开发者**：收藏大量技术文档、GitHub 仓库、解决方案。
- **学生/考研党**：收集学习资料、论文参考文献。
- **内容创作者**：需要建立素材库，寻找灵感来源。

## 3. 功能需求 (Functional Requirements)

### 3.1 用户账户系统 (User Account System)
- **注册与登录**：
  - 支持邮箱 + 密码注册/登录（含邮箱验证）。
  - 支持第三方快捷登录（Google, GitHub）。
  - 忘记密码/重置密码流程。
- **个人中心**：
  - **基础信息**：头像、昵称 管理。
  - **偏好设置**：
    - 界面语言（中文/英文）。
    - 主题模式（明亮/暗黑/跟随系统）。
- **账户安全与管理**：
  - 修改密码。
  - 账号注销与数据彻底删除功能。
- **会员订阅（预留）**：
  - 查看当前会员状态及权益。
  - 订阅管理入口。

### 3.2 智能采集与客户端交互 (Smart Collection & Client Interaction)
- **采集流程**：
  1. **正文提取**：用户点击插件图标时，插件在前端自动解析当前网页，提取正文内容（Readability 算法）。
  2. **AI 分析**：插件将提取的正文（或截断的正文）发送给 LLM（本地或云端），生成**标题、摘要、分类、标签**。
  3. **预览与编辑**：
     - 插件弹出面板展示 AI 生成的元数据。
     - 用户可手动修改 标题、摘要、选择/新建分类、增删标签。
  4. **保存**：用户确认无误后，点击“保存”，数据同步至服务端。
- **多端采集**：
  - **浏览器插件**（Chrome/Edge/Safari）：上述完整流程。
  - **移动端分享**：通过系统分享菜单保存链接（移动端暂不支持前端提取，需依赖服务端异步处理）。
  - **微信/Telegram 机器人**：转发消息即可保存（服务端异步处理）。
- **内容抓取**：
  - 网页快照：自动截图/生成快照（防止原链接失效） --可选功能（建议服务端处理）。

### 3.3 智能整理 (AI Organization)
采集时智能生成分类相关的信息
- **自动分类**：根据网页内容，AI 自动推荐或直接归入相应的分类（如：技术、设计、生活、食谱）。
- **智能标签**：AI 提取文章关键词，自动打标签（Tags）。
- **自动摘要**：AI 生成网页描述

### 3.4 知识内化与检索 (Retrieval & Knowledge)
- **全文搜索**：不仅搜索标题和 URL，支持对网页正文内容的深度搜索（向量搜索/关键词搜索混合）。
- **自然语言问答**：类似 "我上周看的那篇关于 React 性能优化的文章里提到的库叫什么？"，AI 返回答案及原文链接。

### 3.5 回顾与激活 (Review & Activation)
- **每日/每周回顾**：推送“你可能遗忘的宝藏”，基于艾宾浩斯遗忘曲线提醒复习。
- **随机漫步**：随机展示一条过去的收藏，激发灵感。

### 3.6 书签导入
- **导入方式**：
  - 支持导入当前浏览器书签内容。
  - 支持上传书签文档（HTML格式）导入。
- **数据处理**：
  - **文件夹映射**：导入时可选择是否保留原文件夹分类信息，或将文件夹名称转成标签存储。
  - **去重策略**：默认跳过已存在的 URL。
  - **AI 处理选项**：导入时可勾选是否自动触发 AI 处理（分类、摘要、标签）。
    - *注：批量处理可能耗时较长，建议后台队列执行。*

### 3.7 自定义 AI 模型 (BYOK - Bring Your Own Key)
- **模型支持**：支持配置通用的 LLM 模型 API Key（如 OpenAI, Anthropic, Google Gemini, DeepSeek 等）。
- **自定义端点**：支持设置自定义 Base URL，方便接入 OneAPI 或本地开源模型（Ollama/LocalAI）。
- **模型参数**：允许高级用户调整 Temperature、Max Tokens 等参数。

### 3.8 数据管理与导出
- **手动整理**：支持对 AI 分类/标签结果的人工修正、批量移动、删除。
- **回收站**：误删保护机制，支持 30 天内恢复。
- **全量导出**：支持将所有书签数据（含元数据）导出为 JSON/HTML 格式。

## 4. 前端交互流程 (Frontend UX Flows)

### 4.1 插件收藏交互
1. **激活**：点击浏览器插件图标 / 快捷键（Cmd+E）。
2. **Loading 态**：
   - 显示“正在提取页面内容...”动画。
   - 显示“AI 正在分析...”动画。
3. **编辑态（浮层面板）**：
   - **标题**：可编辑输入框（默认填入网页 Title）。
   - **摘要**：多行文本域（预填 AI 生成内容，支持修改）。
   - **分类**：下拉选择框（支持搜索，支持新建，预选中 AI 推荐）。
   - **标签**：Tag 输入框（支持回车添加，点击移除，预填 AI 推荐）。
   - **底部按钮**：
     - [取消]
     - [保存] (Primary)
4. **成功态**：保存成功 Toast 提示，自动关闭面板。

### 4.2 Web 端管理交互
- **侧边栏**：
  - 固定入口：全部书签、未分类、回收站。
  - 分类树：展示自定义分类文件夹。
  - 标签云（可选折叠）。
- **列表区**：
  - 支持 **列表视图**（紧凑）和 **卡片视图**（带封面图和摘要）。
  - 悬停操作：编辑、删除、分享、打开快照。
  - 批量操作：多选后底部浮出操作栏（批量移动、打标、删除）。
- **搜索栏**：
  - 顶部居中，支持实时联想。
  - 搜索结果页高亮匹配关键词。

## 5. 非功能需求 (Non-functional Requirements)
- **隐私优先**：用户数据加密存储，提供本地部署或自托管（Self-hosted）选项。
- **高性能**：搜索响应时间 < 200ms。
- **跨平台同步**：Web、iOS、Android、Desktop 实时同步。
- **导出/备份**：支持导出为 Markdown、Notion、Obsidian 格式，支持 HTML 书签导出。

## 6. 路线图 (Roadmap)
### Phase 1: MVP (最小可行性产品)
- 浏览器插件（基础保存 + 前端 AI 分析编辑）。
- Web 端列表展示。
- 基础全文搜索。
- 简单的文件夹管理。
- 用户注册/登录系统。
- 引入 LLM 进行自动分类、摘要、标签。
- 网页快照保存（HTML/MHTML）。

### Phase 2: 知识网络
- 向量搜索与自然语言问答（Chat with Bookmarks）。
- 移动端 App 开发。
